pipeline{
agent any
stages{
stage('deploy'){
steps{
withKubeConfig( hostname:'minikube',caCertificate: 'ca-cert', clusterName: 'local-cluster', contextName: 'local-cluster', credentialsId: 'Github', namespace: 'webapps', restrictKubeConfigAccess: false, serverUrl: ' https://192.168.58.2:8443') {
 sh "kubectl apply -f depl.yml" 
}
}
}

}
}
